(function(n){extend("MillerElectric.ContactForms",{vars:{$contactForm:{}},init:function(){var t=MillerElectric.ContactForms,i=t.vars,r;i.$contactForm=n(".contact-form"),n("#mainform").validate({onsubmit:!1}),r=i.$contactForm.find(".submit");r.on("click",t.validateForm);t.Address.init(),t.RequestLiteratureDownload.init(),t.RequestLiteratureForm.init(),t.RequestDistributorLiteratureForm.init(),t.AskExpertForm.init(),t.ContactForm.init(),t.ProductRegistration.init(),t.ProjectSubmission.init()},validateForm:function(t){var r=MillerElectric.ContactForms,u=r.vars,i=!0;u.$contactForm.each(function(){n(this).find("input,select,textfield").each(function(t,r){n(r).valid()||(i=!1)})}),n("div.g-recaptcha").length&&grecaptcha.getResponse()==""&&(t.preventDefault(),n(".g-recaptcha div div").addClass("error"),n("#g-recaptcha-error").show(),i=!1),i?(n(".submit-button .submit").not(".disabled").css("visibility","hidden"),n(".submit-button .submit").siblings(".miller-button").length==0&&n('<div class="miller-button gold submit disabled"><span>Please Wait<\/span><\/div>').insertBefore(n(".submit-button .submit"))):(t.preventDefault(),r.scrollToFirstError())},scrollToFirstError:function(){var i=MillerElectric.ContactForms,r=i.vars,t=r.$contactForm.find(":input.error:first");t.length&&n("html").animate({scrollTop:t.offset().top-100},1e3)},scrollToElement:function(t){var r=MillerElectric.ContactForms,u=r.vars,i=u.$contactForm.find(t);i.length&&n("html").animate({scrollTop:i.offset().top-100},1e3)},selectDropDown:function(t){var e=n("#"+t+" option"),i=[],r,f,u;if(window.location.href.indexOf("?")>=0){for(f=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),u=0;u<f.length;u++)r=f[u].split("="),i.push(r[0]),i[r[0]]=r[1];i.length>0&&i.expert!=null&&i.expert.length>0&&e.each(function(){n(this).text().toLowerCase()==unescape(i.expert).toLowerCase()&&n(this).attr("selected","selected")})}}}),extend("MillerElectric.ContactForms.ContactForm",{config:{contactDropdownId:"",showFormClassPrefix:"show-",requiredClass:"required",requiredSpan:'<span class="required">*<\/span>',formRequirements:[{questionTypeIDs:["1410745e-977f-44d8-92a0-26c5c4298d79","53a59c45-a25a-49c8-9feb-e78edeb1afd7"],questionTypeName:"Assistance With My Welder",inputSelector:"#serial-number-li input",labelSelector:"#serial-number-li label",optionalText:"Serial Number (optional): ",requiredText:"Serial Number: ","default":undefined}]},vars:{$contactForm:{}},init:function(){var r=MillerElectric.ContactForms.ContactForm,t=n.extend(!0,r.config,r.serverConfig),u=r.vars,i;if(u.$contactForm=n("#contact-us-form"),u.$contactForm.length){for(MillerElectric.ContactForms.selectDropDown(t.contactDropdownId),i=0;i<t.formRequirements.length;i++){let r=n(t.formRequirements[i].inputSelector).hasClass(t.requiredClass);t.formRequirements[i].default=r}n("#"+t.contactDropdownId).on("change",function(n){r.onDropdownSelect(n,t.requiredSpan,t.requiredClass,t.formRequirements)})}},onDropdownSelect:function(t,i,r,u){for(var l=n(t.srcElement),s=l.find("option:selected"),a=s.val(),v=s.text(),o,f=0;f<u.length;f++){var e=n(u[f].labelSelector),h=n(u[f].inputSelector),c=!1;for(o=0;o<u[f].questionTypeIDs.length;o++)if(u[f].questionTypeIDs[o]===a){c=!0;break}c||v==u[f].questionTypeName?(h.addClass(r),e.text(u[f].requiredText),e.append(i)):u[f].default==!1&&(h.removeClass(r),e.text(u[f].optionalText),e.find("span").remove())}}}),extend("MillerElectric.ContactForms.Address",{config:{statesUrl:"/ac/utility/states/",requiredClass:"required"},init:function(){var t=MillerElectric.ContactForms.Address,i=n.extend(!0,t.config,t.serverConfig)},onCountryChange:function(t,i){var e=MillerElectric.ContactForms.Address,f=e.config,r=n(t).val(),u=n("#"+i);r&&n.trim(r).length!=0&&n.get(f.statesUrl+r,function(n){for(var r=[],i=n.length>0,t=0;t<n.length;t++)r.push('<option value="'+n[t].Title+'">'+n[t].Title+"<\/option>");u.children(":not(:first)").remove().end().append(r.join("")).toggleClass(f.requiredClass,i).prev("label").find("span").text(i?"*":""),i?u.prop("disabled",!1):u.prop("disabled","disabled")})}}),extend("MillerElectric.ContactForms.RequestLiteratureDownload",{config:{selectors:{container:"#request-literature-download",accordion:".content-container",mailRequestButton:"a.mail-request",selectedCount:".selected-count"},cookieName:""},init:function(){var u=MillerElectric.ContactForms.RequestLiteratureDownload,l=n.extend(!0,u.config,u.serverConfig),i=l.selectors,f,t,e,s,o,r,c,h;if(n(i.container).length){n(i.container).on("change",":checkbox",u.onCheckboxChange);n(i.container).on("click",i.mailRequestButton,u.onMailRequestClick);if(f=n(i.accordion+".js-accordion .js-category"),t=[],window.location.href.indexOf("?")>=0){for(s=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<s.length;o++)e=s[o].split("="),t.push(e[0]),t[e[0]]=e[1];if(t.length>0&&t.category!=null&&t.category.length>0)for(r=0;r<f.length;r++)c=n(f[r]).text().trim().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/\s+/g,"-").toLowerCase(),c==unescape(t.category).toLowerCase()&&(h=n(f[r]).closest(i.accordion+".js-accordion"),n(h).removeClass("closed").addClass("open"),n(h)[0].scrollIntoView())}}},getSelectedItems:function(){var t=MillerElectric.ContactForms.RequestLiteratureDownload,i=t.config,r=i.selectors;return n(r.container).find("input:checkbox:checked").map(function(){var t=n(this).data();return this.id}).get()},onCheckboxChange:function(){var t=MillerElectric.ContactForms.RequestLiteratureDownload,i=n(this);t.updateSelectedCount(i)},onMailRequestClick:function(t){var r=MillerElectric.ContactForms.RequestLiteratureDownload,u=r.config,i=r.getSelectedItems();if(!i||i.length==0){alert(ActiveCommerce.App.Localize.text("Forms-Literature-No-Media-Selected")),t.preventDefault();return}n.cookie(u.cookieName,JSON.stringify(i))},updateSelectedCount:function(n){var r=MillerElectric.ContactForms.RequestLiteratureDownload,u=r.config,t=u.selectors,i=n.closest(t.accordion),f=i.find("input:checkbox:checked").length;i.find(t.selectedCount).text(ActiveCommerce.App.Localize.text("Forms-Literature-Selected-Count",f))}}),extend("MillerElectric.ContactForms.RequestLiteratureForm",{config:{selectors:{container:"#request-literature-form",fileTable:".literature-items",qtyColumn:".qty",qtyIncButton:".inc-qty",qtyDecButton:".dec-qty"}},init:function(){var i=MillerElectric.ContactForms.RequestLiteratureForm,r=i.config,t=r.selectors;if(n(t.container).length){n(t.fileTable).on("click",t.qtyIncButton,"inc",i.onQtyAdjustmentClick);n(t.fileTable).on("click",t.qtyDecButton,"dec",i.onQtyAdjustmentClick)}},onQtyAdjustmentClick:function(t){var u=MillerElectric.ContactForms.RequestLiteratureForm,f=u.config,e=f.selectors,o=n(this),r,i;t.preventDefault(),r=o.closest("tr").find(e.qtyColumn).find("input"),i=r.val(),t.data==="inc"?i++:(i--,i<0&&(i=0)),r.val(i)}}),extend("MillerElectric.ContactForms.RequestDistributorLiteratureForm",{config:{selectors:{container:"#request-literature-form",submitButton:".submit js--recaptcha-resubmit",placeholderTextBox:".product-selection"},attributeIdentifier:"product-order-input",dataNameAttribute:"data-name"},init:function(){var t=MillerElectric.ContactForms.RequestDistributorLiteratureForm,i=t.config,r=i.selectors;t.validateFormFields();n("#mainform").on("submit",t.populatePlaceholderData)},populatePlaceholderData:function(){var u=MillerElectric.ContactForms.RequestDistributorLiteratureForm,t=u.config,f=t.selectors;let e="["+t.attributeIdentifier+"]",i="",r=[];n(e).each(function(){if(n(this).val().length>0){let i={};i.Name=n(this).attr("id")+" "+n(this).attr(t.dataNameAttribute),i.Quantity=n(this).val(),r.push(i)}}),i=JSON.stringify(r),i=JSON.stringify(r),n(f.placeholderTextBox).val(i)},validateFormFields:function(){var i=MillerElectric.ContactForms.RequestDistributorLiteratureForm,t=i.config,u=t.selectors;let r="["+t.attributeIdentifier+"]";n("#mainform").find(r).each(function(){n(this).rules("add",{min:1,integer:!0,messages:{min:jQuery.validator.format("Please select positive number"),integer:jQuery.validator.format("Please select whole number (ex. 1,2,3,4)")}})})}}),extend("MillerElectric.ContactForms.AskExpertForm",{config:{expertLookupValues:{},expertTypeDropdownId:"",showFormClassPrefix:"show-"},vars:{$askExpertForm:{},$activeForm:{},$expertTypeDropdown:{}},init:function(){var i=MillerElectric.ContactForms.AskExpertForm,r=n.extend(!0,i.config,i.serverConfig),t=i.vars;(t.$askExpertForm=n("#ask-expert-form"),t.$askExpertForm.length)&&(t.$activeForm=t.$askExpertForm.find("#active-form"),t.$expertTypeDropdown=n("#"+r.expertTypeDropdownId),MillerElectric.ContactForms.selectDropDown(r.expertTypeDropdownId),i.setActiveFormClass(),n("#uxRequiredDeliveryDate").datepicker())},setActiveFormClass:function(){var r=MillerElectric.ContactForms.AskExpertForm,u=r.config,i=r.vars,f=i.$expertTypeDropdown.val(),t=_.find(u.expertLookupValues,function(n){return n.ItemId==f});i.$activeForm.attr("class","noexpert"),t!=undefined&&(i.$activeForm.attr("class",""),i.$activeForm.addClass(u.showFormClassPrefix+t.FormId),t.FormId=="advanced-form"||t.FormId=="automation-form"?(n(".userTypeField").show(),n(".userTypeField select").addClass("required")):(n(".userTypeField").hide(),n(".userTypeField select").removeClass("required")),t.FormId=="subarc-form"?(n(".questionTypeField").show(),n(".questionTypeField select").addClass("required")):(n(".questionTypeField").hide(),n(".questionTypeField select").removeClass("required")),t.FormId=="fume-extraction-form"?(n(".fumeExtractionTypeField").show(),n(".materialConditionField").show(),n(".weldingHoursField").show(),n(".stationsToVentilateField").show(),n(".operatingVoltageField").show(),n(".requiredDeliveryDateField").show()):(n(".fumeExtractionTypeField").hide(),n(".materialConditionField").hide(),n(".weldingHoursField").hide(),n(".stationsToVentilateField").hide(),n(".operatingVoltageField").hide(),n(".requiredDeliveryDateField").hide()),n(".form-preamble div").hide(),n(".show-"+t.FormId).find("."+t.FormId).show())},onExpertTypeChange:function(){var n=MillerElectric.ContactForms.AskExpertForm,t=n.config;n.setActiveFormClass()}}),extend("MillerElectric.ContactForms.ProductRegistration",{config:{GetProductBySerialNumberUrl:"/api/ProductRegistration/GetProductBySerialNumber",GetProductByStockNumberUrl:"/api/ProductRegistration/GetProductByStockNumber",GetHelmetsFromModelNumberUrl:"/api/ProductRegistration/GetHelmetOptionsForModel",GetWorkstationOptionsFromModelNumberUrl:"/api/ProductRegistration/GetWorkstationOptionsForModel",registeredProductsListTemplateId:"registered-products",registeredProductsConfirmationListTemplateId:"registered-products-confirmation",cookieName:""},vars:{$productRegistrationForm:{},$steps:[],$productVerificationList:{},$productConfirmationList:{},$uxPurchaseDate:{},productRegistrationArray:[],activeStep:0,isLoading:!1,$instoreDistributorId:{},$instoreDistributorConfirmationName:{},$instoreDistributorConfirmationAddress:{},$instoreDistributorConfirmationCityStateZip:{},$otherLocationAddl:{},$validated:!1},init:function(){var t=MillerElectric.ContactForms.ProductRegistration,r=n.extend(!0,t.config,t.serverConfig),i=t.vars;(i.$productRegistrationForm=n("#product-registration-form"),i.$productRegistrationForm.length)&&(i.$uxPurchaseDate=n("#uxPurchaseDate"),t.PurchaseLocation.init(),t.wireUpFormElements(),n("#uxPurchaseDate").datepicker({maxDate:"0"}),t.showStep(2))},wireUpFormElements:function(){var i=MillerElectric.ContactForms.ProductRegistration,t=i.vars;t.$steps.push(t.$productRegistrationForm.find("#step-1")),t.$steps.push(t.$productRegistrationForm.find("#step-2")),t.$steps.push(t.$productRegistrationForm.find("#step-3")),t.$steps.push(t.$productRegistrationForm.find("#step-4")),t.$steps.push(t.$productRegistrationForm.find("#step-5")),t.$productLookupSection=t.$productRegistrationForm.find("#product-lookup-section"),t.$helmetSeriesFields=t.$productRegistrationForm.find("#helmet-series-fields"),t.$welderErrorMessage=n("#welder-serialnumber-error"),t.$welderEnpakMessage=n("#welder-enpak-message"),t.$productVerificationList=t.$productRegistrationForm.find("#product-verification-list"),t.$productConfirmationList=t.$productRegistrationForm.find("#product-confirmation-list");t.$productVerificationList.on("click",".remove-product",i.onRemoveProductClick);t.$purchaceLocationTypeId=n("#purchase-type-id"),t.$selectProductType=t.$productRegistrationForm.find("#uxSelectProduct"),t.$validateProductButton=t.$productRegistrationForm.find("#validate-product-button");t.$validateProductButton.on("click",i.onValidateStep1);t.$welderSerialNumber=n("#uxWelderSerialNumber"),t.$selectHelmetSeries=t.$productRegistrationForm.find(".uxSelectHelmetSeries"),t.$selectHelmetDesign=t.$productRegistrationForm.find(".uxSelectHelmetDesign"),t.$selectHelmetDesign.prop("disabled","disabled"),t.$selectWorkstationModel=n("#uxSelectWorkstationModel"),t.$selectWorkstationProduct=n("#uxWorkstationProduct"),t.$selectWorkstationProduct.prop("disabled","disabled"),t.$editButtons=t.$productRegistrationForm.find(".edit-step");t.$editButtons.on("click",i.onEditStepClick);t.$startOverButton=n("#start-over");t.$startOverButton.on("click",i.onAddMoreProductsButtonClick);t.$validateStep2Button=t.$productRegistrationForm.find("#validate-product-lookup-button");t.$validateStep2Button.on("click",i.onValidateStep2ButtonClick);t.$validateStep3Button=t.$productRegistrationForm.find("#validate-step-3-button");t.$validateStep3Button.on("click",i.onValidateStep3ButtonClick);t.$validateStep4Button=t.$productRegistrationForm.find("#validate-step-4-button");t.$validateStep4Button.on("click",i.onValidateStep4ButtonClick);t.$addMoreProductsButton=t.$productRegistrationForm.find("#add-more-products-button");t.$addMoreProductsButton.on("click",i.onAddMoreProductsButtonClick);t.$userTypeGroups=n("#uxUserTypeGroups");t.$userTypeGroups.on("click",i.onSelectUserGroupType);t.$professionalUserGroupList=n("#pro-useage-types");t.$professionalUserGroupList.on("click",i.onProfessionalUseageGroupListClick);t.$professionalUserGroupCheckbox=n("#uxUserTypeGroups_0"),t.$professionalUserGroupCheckbox1=n("#uxUserTypeGroups_1"),t.$professionalUserGroupErrorMessage=n("#pro-useage-error"),t.$productAlreadySelectedErrorMessage=n("#product-already-selected"),t.$numWelders=n("#number-welders"),t.$numWelders.hide(),t.$numberWeldMachines=n("#number-weld-machines"),t.$otherProUsageType=n("#otherProUsageType"),t.$otherProUsageTypeLabel=n("#otherProUsageTypeLabel"),t.$professionalUserGroupList.find("input[value='other']:checked").length==0?(t.$otherProUsageType.hide(),t.$otherProUsageTypeLabel.hide()):(t.$otherProUsageType.show(),t.$otherProUsageTypeLabel.show()),t.$personalUserGroupList=n("#personal-useage-types"),t.$title=n("#pro-title"),t.$company=n("#pro-company");t.$personalUserGroupList.on("click",i.onPersonalUseageGroupListClick);t.$personalUserGroupCheckbox=n("#uxUserTypeGroups_2"),t.$personalUserGroupErrorMessage=n("#personal-useage-error"),t.$otherPersonalUsageType=n("#otherPersonalUsageType"),t.$otherPersonalUsageTypeLabel=n("#otherPersonalUsageTypeLabel"),t.$personalUserGroupList.find("input[value='other']:checked").length==0?(t.$otherPersonalUsageType.hide(),t.$otherPersonalUsageTypeLabel.hide()):(t.$otherPersonalUsageType.show(),t.$otherPersonalUsageTypeLabel.show()),t.$submitProductRegistration=t.$productRegistrationForm.find(".submit-product-registration");t.$submitProductRegistration.on("click",i.onValidateStep5ButtonClick);t.$submitButton=n("#uxSubmitButton"),t.$instoreDistributorId=n("#instore-distributor-id"),t.$instoreDistributorConfirmationName=n("#instore-confirmation-name"),t.$instoreDistributorConfirmationAddress=n("#instore-confirmation-address"),t.$instoreDistributorConfirmationCityStateZip=n("#instore-confirmation-citystatezip"),t.$otherLocationAddl=n("#otherLocationAddl")},showStep:function(t){var u=MillerElectric.ContactForms.ProductRegistration,i=u.vars,r;for(i.activeStep=t,r=0;r<i.$steps.length;r++)r+1==i.activeStep?(n(i.$steps[r]).addClass("active"),n(i.$steps[r]).removeClass("completed")):n(i.$steps[r]).removeClass("active");switch(i.activeStep){case 1:n(i.$steps[0]).removeClass("completed"),i.$selectProductType.prop("disabled",!1),i.$productLookupSection.hide(),i.$helmetSeriesFields.hide(),i.$welderErrorMessage.hide(),i.$welderEnpakMessage.hide(),i.$startOverButton.hide();break;case 2:i.$welderSerialNumber.val(""),i.$productLookupSection.show(),u.showHelmetSeriesFields(),i.$selectProductType.prop("disabled","disabled"),n(i.$steps[0]).addClass("completed");break;case 3:n(i.$steps[0]).removeClass("completed"),i.$productLookupSection.hide(),i.$selectHelmetSeries.val(""),i.$startOverButton.show(),i.$selectHelmetDesign.children(":not(:first)").remove().end();break;case 4:n(i.$steps[2]).addClass("completed");break;case 5:n(i.$steps[3]).addClass("completed"),u.displayRegisteredProductsConfirmation()}},onEditStepClick:function(t){var i=MillerElectric.ContactForms.ProductRegistration,u=i.vars,r;(t.preventDefault(),u.isLoading)||(r=n(this).data("editStep"),i.showStep(r))},onValidateStep1:function(n){var t=MillerElectric.ContactForms.ProductRegistration,i=t.vars;(n.preventDefault(),i.isLoading)||i.$selectProductType.valid()&&t.showStep(2)},onValidateStep2ButtonClick:function(n){var i=MillerElectric.ContactForms.ProductRegistration,t=i.vars;(n.preventDefault(),t.isLoading)||(t.$welderSerialNumber.val()==undefined||t.$welderSerialNumber.val()==""||t.$selectHelmetSeries.valid()?(t.$welderErrorMessage.hide(),t.$selectHelmetSeries.valid()&&t.$selectHelmetDesign.valid()&&i.loadProductByStockNumber(t.$selectHelmetDesign.val())):t.$welderSerialNumber.valid()&&i.loadProductBySerialNumber(t.$welderSerialNumber.val(),i.showWelderErrorMessage))},onValidateStep2WelderButtonClick:function(n){var t=MillerElectric.ContactForms.ProductRegistration,i=t.vars;(n.preventDefault(),i.isLoading)||i.$welderSerialNumber.valid()&&t.loadProductBySerialNumber(i.$welderSerialNumber.val(),t.showWelderErrorMessage)},showHelmetSeriesFields:function(){var n=MillerElectric.ContactForms.ProductRegistration,t=n.vars;t.$helmetSeriesFields.show(),n.hideLoading()},showWelderErrorMessage:function(){var n=MillerElectric.ContactForms.ProductRegistration,t=n.vars;t.$welderEnpakMessage.hide(),t.$welderErrorMessage.show(),n.hideLoading()},onValidateStep2HelmetButtonClick:function(n){var i=MillerElectric.ContactForms.ProductRegistration,t=i.vars;(n.preventDefault(),t.isLoading)||t.$selectHelmetSeries.valid()&&t.$selectHelmetDesign.valid()&&i.loadProductByStockNumber(t.$selectHelmetDesign.val())},onValidateStep3ButtonClick:function(n){var t=MillerElectric.ContactForms.ProductRegistration,i=t.vars;(n.preventDefault(),i.isLoading)||(i.productRegistrationArray.length>0?t.showStep(4):alert("please add at least 1 product for registration"))},onAddMoreProductsButtonClick:function(n){var t=MillerElectric.ContactForms.ProductRegistration,i=t.vars;(n.preventDefault(),i.isLoading)||t.showStep(2)},onSelectUserGroupType:function(){var t=MillerElectric.ContactForms.ProductRegistration,n=t.vars;n.$personalUserGroupCheckbox.prop("checked")?(n.$personalUserGroupList.slideDown("fast"),n.$numWelders.hide(),n.$title.hide(),n.$company.hide()):(n.$personalUserGroupList.slideUp("fast"),n.$personalUserGroupList.find("input:checked").prop("checked",!1),n.$personalUserGroupErrorMessage.hide()),n.$professionalUserGroupCheckbox.prop("checked")?(n.$professionalUserGroupList.slideDown("fast"),n.$title.show(),n.$company.show(),n.$numWelders.show(),n.$numberWeldMachines.show()):n.$professionalUserGroupCheckbox1.prop("checked")?(n.$professionalUserGroupList.slideDown("fast"),n.$title.show(),n.$company.show(),n.$numWelders.show(),n.$numberWeldMachines.show()):(n.$professionalUserGroupList.slideUp("fast"),n.$professionalUserGroupList.find("input:checked").prop("checked",!1),n.$professionalUserGroupErrorMessage.hide()),t.validateUserGroupList()},onPersonalUseageGroupListClick:function(){var t=MillerElectric.ContactForms.ProductRegistration,n=t.vars;n.$personalUserGroupList.find("input[value='other']:checked").length==0?(n.$otherPersonalUsageType.hide(),n.$otherPersonalUsageTypeLabel.hide()):(n.$otherPersonalUsageType.show(),n.$otherPersonalUsageTypeLabel.show()),t.validatePersonalUserGroupList()},onProfessionalUseageGroupListClick:function(){var t=MillerElectric.ContactForms.ProductRegistration,n=t.vars;n.$professionalUserGroupList.find("input[value='other']:checked").length==0?(n.$otherProUsageType.hide(),n.$otherProUsageTypeLabel.hide()):(n.$otherProUsageType.show(),n.$otherProUsageTypeLabel.show()),t.validateProfessionalUserGroupList()},onValidateStep4ButtonClick:function(t){var r=MillerElectric.ContactForms.ProductRegistration,tt=MillerElectric.ContactForms.ProductRegistration.PurchaseLocation,i=r.vars,c=n(".contact-form"),u,s,h,f;if(!i.isLoading)if(u=!1,i.$validated=u,u=r.validateSectionFields(n("#step-4").find(".validation-fields"))&&r.validateCheckLists()&&r.PurchaseLocation.validateDistributorSelection(),u){var o="This product was purchased from: ",l=n("#contact-firstname-id").val(),a=n("#contact-lastname-id").val(),v=n("#contact-address-id").val(),y=n("#contact-address2-id").val(),p=n("#contact-city-id").val(),w=n("#contact-state-id").val(),b=n("#contact-zip-id").val(),k=n("#contact-phone-id").val(),d=n("#contact-email-id").val(),g=n("#purchase-date-id").val(),e=new Date(n("#"+g).val()),nt=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+" "+e.getDate()+", "+e.getFullYear();n("#location-confirmation-purchase-date").text(nt),s=n("#purchase-gift-id").val(),h=i.$purchaceLocationTypeId.val(),i.$purchaceLocationTypeSelected=n("#"+h+" input:checked"),i.$purchaseLocationType=i.$purchaceLocationTypeSelected.val(),n("#"+s).prop("checked")?(n(".location-confirmation").text(""),n(".location-confirmation-purchase-date").hide()):i.$purchaseLocationType=="online"?(n(".location-confirmation-purchase-date").show(),n(".location-confirmation").text(""),f=n("#"+n("#location-online-id").val()+" option:selected").text(),n("#location-confirmation-name").text("Online Location: "+f)):i.$purchaseLocationType=="other"?(n(".location-confirmation-purchase-date").show(),n(".location-confirmation").text(""),f=n("#"+n("#location-other-id").val()).val(),n("#location-confirmation-name").text(o+f)):i.$purchaseLocationType=="store"?(n(".location-confirmation-purchase-date").show(),n(".location-confirmation").text(""),i.$instoreDistributorId.val()!=""?(n("#location-confirmation-name").text(i.$instoreDistributorConfirmationName.val()),n("#location-confirmation-address").text(i.$instoreDistributorConfirmationAddress.val()),n("#location-confirmation-citystatezip").text(i.$instoreDistributorConfirmationCityStateZip.val()),n(".js-hdn-store-name").val(i.$instoreDistributorConfirmationName.val()),n(".js-hdn-store-address").val(i.$instoreDistributorConfirmationAddress.val()),n(".js-hdn-store-citystatezip").val(i.$instoreDistributorConfirmationCityStateZip.val())):i.$otherLocationAddl.val()!=""&&n("#location-confirmation-name").text(o+i.$otherLocationAddl.val())):(n(".location-confirmation").text(""),n(".location-confirmation-purchase-date").hide()),n("#owner-confirmation-name").text(n("#"+l).val()+" "+n("#"+a).val()),n("#owner-confirmation-address").text(n("#"+v).val()),n("#owner-confirmation-address2").text(n("#"+y).val()),n("#owner-confirmation-citystatezip").text(n("#"+p).val()+", "+n("#"+w).val()+" "+n("#"+b).val()),n("#owner-confirmation-phone").text(n("#"+k).val()),n("#owner-confirmation-email").text(n("#"+d).val()),r.showStep(5),i.$validated=u}else t.preventDefault(),c.find(":input.error:first").offset()?MillerElectric.ContactForms.scrollToFirstError():MillerElectric.ContactForms.scrollToElement("#step-4")},onValidateStep5ButtonClick:function(t){var u=MillerElectric.ContactForms.ProductRegistration,i=u.vars,r;i.isLoading||(r=i.$validated,r?(i.$submitButton.css("visibility","hidden"),n('<div class="miller-button gold submit disabled"><span>Please Wait<\/span><\/div>').insertBefore(i.$submitButton)):t.preventDefault())},validateUserGroupList:function(){var i=MillerElectric.ContactForms.ProductRegistration,n=i.vars,t=!0;return n.$userTypeGroups.find("input:checked").length==0?(n.$userTypeGroups.prev("label.error").show(),t=!1):n.$userTypeGroups.prev("label.error").hide(),t},validatePersonalUserGroupList:function(){var i=MillerElectric.ContactForms.ProductRegistration,n=i.vars,t=!0;return n.$personalUserGroupCheckbox.prop("checked")&&(n.$personalUserGroupList.find("input:checked").length==0?(n.$personalUserGroupErrorMessage.show(),t=!1):n.$personalUserGroupErrorMessage.hide()),t},validateProfessionalUserGroupList:function(){var i=MillerElectric.ContactForms.ProductRegistration,n=i.vars,t=!0;return n.$professionalUserGroupCheckbox.prop("checked")?n.$professionalUserGroupList.find("input:checked").length==0?(n.$professionalUserGroupErrorMessage.show(),t=!1):n.$professionalUserGroupErrorMessage.hide():n.$professionalUserGroupCheckbox1.prop("checked")&&(n.$professionalUserGroupList.find("input:checked").length==0?(n.$professionalUserGroupErrorMessage.show(),t=!1):n.$professionalUserGroupErrorMessage.hide()),t},validateCheckLists:function(){var n=MillerElectric.ContactForms.ProductRegistration,i=n.vars,t=!0;return n.PurchaseLocation.validatePurchaseLocationGroupList()||(t=!1),n.validateUserGroupList()||(t=!1),n.validatePersonalUserGroupList()||(t=!1),n.validateProfessionalUserGroupList()||(t=!1),t},validateSectionFields:function(t){var r=MillerElectric.ContactForms.ProductRegistration,u=r.vars,i=!0;return t.each(function(){n(this).find("input,select,textfield").each(function(t,r){n(r).valid()||(i=!1)})}),i},showLoading:function(){var i=MillerElectric.ContactForms.ProductRegistration,u=i.config,t=i.vars,r;t.isLoading=!0,r=n(t.$steps[t.activeStep-1]),r.addClass("loading")},hideLoading:function(){var i=MillerElectric.ContactForms.ProductRegistration,u=i.config,t=i.vars,r;t.isLoading=!1,r=n(t.$steps[t.activeStep-1]),r.removeClass("loading")},loadProductBySerialNumber:function(t,i){var r=MillerElectric.ContactForms.ProductRegistration,f=r.config,e=r.vars,u;i=typeof i!="undefined"?i:r.onLoadFailed,r.showLoading(),u={SerialNumber:t},n.ajax({type:"POST",url:f.GetProductBySerialNumberUrl,data:JSON.stringify(u),contentType:"application/json",dataType:"json"}).done(r.onProductLoaded).fail(i)},loadProductByStockNumber:function(t){var i=MillerElectric.ContactForms.ProductRegistration,u=i.config,f=i.vars,r;i.showLoading(),r={StockNumber:t},n.ajax({type:"POST",url:u.GetProductByStockNumberUrl,data:JSON.stringify(r),contentType:"application/json",dataType:"json"}).done(i.onProductLoaded).fail(i.onLoadFailed)},onProductLoaded:function(t){var r=MillerElectric.ContactForms.ProductRegistration,e=r.config,i=r.vars,u,f;r.hideLoading(),t.IsEnpakProduct?(u=i.$selectProductType.find('option[value="EnPak"]').data("url"),i.productRegistrationArray.length==undefined||i.productRegistrationArray.length==0?window.location.href=u:(f=n("#enpak-registration-link"),f.attr("href",u),f.html(u),i.$productAlreadySelectedErrorMessage.hide(),i.$welderErrorMessage.hide(),i.$welderEnpakMessage.show())):t.Description?(i.$productAlreadySelectedErrorMessage.hide(),i.$welderEnpakMessage.hide(),i.productRegistrationArray.push(t),n.cookie(e.cookieName,JSON.stringify(i.productRegistrationArray)),r.displayRegisteredProducts(),r.showStep(3)):alert("An error occurred- please try again.")},containsProduct:function(n,t){for(var r=!1,i=0;i<t.length;i++)if(t[i].StockNumber==n.StockNumber&&t[i].Serial==n.Serial){r=!0;break}return r},onRemoveProductClick:function(t){var i=MillerElectric.ContactForms.ProductRegistration,f=i.config,r=i.vars,u;t.preventDefault(),u=n(this).closest("li").index(),r.productRegistrationArray.splice(u,1),n.cookie(f.cookieName,JSON.stringify(r.productRegistrationArray)),i.displayRegisteredProducts()},displayRegisteredProducts:function(){var i=MillerElectric.ContactForms.ProductRegistration,r=i.config,t=i.vars;t.$productVerificationList.html(""),n.tmpl(r.registeredProductsListTemplateId,t.productRegistrationArray).appendTo(t.$productVerificationList)},displayRegisteredProductsConfirmation:function(){var i=MillerElectric.ContactForms.ProductRegistration,r=i.config,t=i.vars;t.$productConfirmationList.html(""),n.tmpl(r.registeredProductsConfirmationListTemplateId,t.productRegistrationArray).appendTo(t.$productConfirmationList)},onHelmetSeriesChange:function(){var t=MillerElectric.ContactForms.ProductRegistration,u=t.config,f=t.vars,i=f.$selectHelmetSeries.val(),r;i&&n.trim(i).length!=0&&(t.showLoading(),r={ModelNumber:i},n.ajax({type:"POST",url:u.GetHelmetsFromModelNumberUrl,data:JSON.stringify(r),contentType:"application/json",dataType:"json"}).done(t.onHelmetsLoaded).fail(t.onLoadFailed))},onHelmetsLoaded:function(n){var i=MillerElectric.ContactForms.ProductRegistration,f=i.config,r=i.vars,u=[],e=n.length>0,t;for(i.hideLoading(),t=0;t<n.length;t++)u.push('<option value="'+n[t].Code+'">'+n[t].Name+"<\/option>");r.$selectHelmetDesign.children(":not(:first)").remove().end().append(u.join("")),n.length?r.$selectHelmetDesign.prop("disabled",!1):r.$selectHelmetDesign.prop("disabled","disabled")},onLoadFailed:function(n){var t=MillerElectric.ContactForms.ProductRegistration,i=t.config,r=t.vars;alert(n.responseText),t.hideLoading()},gatherPurchaserInfo:function(){}}),extend("MillerElectric.ContactForms.ProjectSubmission",{config:{GetProductSubCategoryUrl:"/api/ProjectGallery/GetProjectSubCatgegory"},vars:{$projectSubmissionForm:{},$projectSubCategoryDropdown:{},$projectSubCategoryValue:{},$submitButton:{}},init:function(){var i=MillerElectric.ContactForms.ProjectSubmission,r=n.extend(!0,i.config,i.serverConfig),t=i.vars;if(t.$projectSubmissionForm=n("#project-submission-form"),t.$projectSubmissionForm.length){t.$projectSubCategoryDropdown=n("#uxProjectSubCategory");t.$projectSubCategoryDropdown.on("change",i.onProjectSubCategoryChange);n("#uxProjectCategory").val().length?i.onProjectCategoryChange():t.$projectSubCategoryDropdown.prop("disabled",!0),t.$projectSubCategoryValue=n("#uxProjectSubCategoryValue"),t.$submitButton=n("#uxSubmitButton");t.$submitButton.on("click",i.onFormSubmit)}},onProjectCategoryChange:function(){var t=MillerElectric.ContactForms.ProjectSubmission,r=t.vars,i={CategoryId:n("#uxProjectCategory").val()};i.CategoryId?n.ajax({type:"POST",url:t.config.GetProductSubCategoryUrl,data:JSON.stringify(i),contentType:"application/json",dataType:"json"}).done(t.onSubCategoryLoaded).fail(t.onLoadFailed):r.$projectSubCategoryDropdown.prop("disabled","disabled").children(":not(:first)").remove()},onProjectSubCategoryChange:function(){var t=MillerElectric.ContactForms.ProjectSubmission,n=t.vars;n.$projectSubCategoryValue.val(n.$projectSubCategoryDropdown.val())},onFormSubmit:function(){var t=MillerElectric.ContactForms.ProjectSubmission,i=t.vars;n("#mainform").valid()&&(i.$projectSubCategoryDropdown.children(":not(:first)").remove().end(),n("#uxSubmitButton").css("visibility","hidden"),n('<div class="miller-button gold submit disabled"><span>Please Wait<\/span><\/div>').insertBefore(n("#uxSubmitButton")))},onSubCategoryLoaded:function(t){for(var f=MillerElectric.ContactForms.ProjectSubmission,o=f.config,r=f.vars,u=[],s=t.length>0,e=n("#uxProjectSubCategoryValue").val(),i=0;i<t.length;i++)e&&t[i].Code==e?u.push('<option value="'+t[i].Code+'" selected="selected">'+t[i].Name+"<\/option>"):u.push('<option value="'+t[i].Code+'">'+t[i].Name+"<\/option>");r.$projectSubCategoryDropdown.children(":not(:first)").remove().end().append(u.join("")),t.length?r.$projectSubCategoryDropdown.prop("disabled",!1):r.$projectSubCategoryDropdown.prop("disabled","disabled")},onLoadFailed:function(n){var t=MillerElectric.ContactForms.ProjectSubmission,i=t.config,r=t.vars;alert(n.responseText)}}),n(function(){MillerElectric.ContactForms.init()})})(jQuery)