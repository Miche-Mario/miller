(function(n){extend("ActiveCommerce.Product.Cart",{config:{headerCountId:"header-cart-count",modalId:"added-to-cart",containerClass:"added-product",templateId:"cart-product",closeClass:"close",continueClass:"continue-shopping",viewClass:"view-cart",shoppingCart:"ul.account-list li.cart"},$elements:{modal:null,addedProductContainer:null},init:function(){var r=ActiveCommerce.Product.Cart,t=n.extend(!0,r.config,r.serverConfig),i=r.$elements;if(i.modal=n("#"+t.modalId),i.addedProductContainer=i.modal.find("."+t.containerClass),ActiveCommerce.Product.Analytics)i.modal.on("click","."+t.closeClass,ActiveCommerce.Product.Analytics.addedCloseClick).on("click","."+t.continueClass,ActiveCommerce.Product.Analytics.addedContinueShoppingClick).on("click","."+t.viewClass,ActiveCommerce.Product.Analytics.addedViewCartClick)},addProduct:function(t,i){var r=ActiveCommerce.Product.Cart;r.hideModal(),n.ajax({url:t,dataType:"json",cache:!1,success:r.onAdded,complete:i||n.noop})},onAdded:function(t){var u=ActiveCommerce.Product.Cart,i=u.config,f=u.$elements,r;n(i.shoppingCart).is(":visible")||n(i.shoppingCart).attr("style",""),r=t,n(document).has("#quick-look-details")?(n("#"+i.headerCountId,window.parent.document).text(r.TotalCount),n(".added-success").show()):(n("#"+i.headerCountId).text(r.TotalCount),f.addedProductContainer.empty().append(n.tmpl(i.templateId,r)),f.modal.fadeIn("fast",function(){n(this).find("."+i.closeClass+", ."+i.continueClass).click(function(n){n.preventDefault(n),u.hideModal()})}))},hideModal:function(){var n=ActiveCommerce.Product.Cart,t=n.$elements;t.modal.fadeOut("fast")}})})(jQuery)